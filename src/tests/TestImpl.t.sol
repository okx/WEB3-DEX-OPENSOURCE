pragma solidity 0.8.20;

import "forge-std/Test.sol";

contract ImplTest is Test {
    function setUp() public {}

    function test_upgrade_xlayer_20240417() public {
        address dexRouter = 0x127a986cE31AA2ea8E1a6a0F0D5b7E5dbaD7b0bE;
        address newImpl = 0x16f37072FFcE9A563C59E13759d2fAE47AE52E5a;
        vm.createSelectFork("https://rpc.xlayer.tech", 501169 - 1);
        vm.store(
            dexRouter,
            0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc,
            bytes32(uint256(uint160(newImpl)))
        );
        address user = 0x00607Bc08b113D3599E5dF567B8C501d832cefc3;
        bytes
            memory data = hex"b80c2f090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dcb18df94df54751a3b50fa91688658be55c12780000000000000000000000001e4a5963abfd975d8c9021ce480b42188849d41d00000000000000000000000000000000000000017a4ae32d4500a94d3570c098000000000000000000000000000000000000000000000000000000000456af2f00000000000000000000000000000000000000000000000000000000661f5494000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000000000000000000000000660000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000017a4ae32d4500a94d3570c0980000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000dcb18df94df54751a3b50fa91688658be55c127800000000000000000000000000000000000000000000000000000000000000010000000000000000000000002706c60251a5e365478874104fa790f5d49a7cc90000000000000000000000000000000000000000000000000000000000000001000000000000000000000000567c19d7973b8e2f6f4b27490b1c4bb13a93e9ff0000000000000000000000000000000000000000000000000000000000000001000000000000000000002710567c19d7973b8e2f6f4b27490b1c4bb13a93e9ff000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000e538905cf8410324e03a5a23c1c177a474d59b2b00000000000000000000000000000000000000000000000000000000000000010000000000000000000000007daf29d2000fd29d5c4b28bd4f1956fe9948d07800000000000000000000000000000000000000000000000000000000000000010000000000000000000000007daf29d2000fd29d5c4b28bd4f1956fe9948d0780000000000000000000000000000000000000000000000000000000000000001800000000000000000002710af02239c392f966798c31bcef767d531a805755c0000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000060000000000000000000000000e538905cf8410324e03a5a23c1c177a474d59b2b0000000000000000000000001e4a5963abfd975d8c9021ce480b42188849d41d0000000000000000000000000000000000000000000000000000000000000bb80000000000000000000000000000000000000000000000000000000000000000";
        vm.startPrank(user);
        (bool s, ) = dexRouter.call(data);
        require(s);
    }
}
